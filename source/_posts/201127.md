---
title: JS
---

## Set
#### Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Set æ•°æ®ç»“æ„

#### Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚
``` javascript
    // å¯ç”¨æ¥æ’é™¤é‡å¤çš„å†…å®¹

    const s = new Set();
    [2, 3, 5, 4, 5, 2, 2].forEach(x => s.add(x));

    for (let i of s) {
        console.log(i);
    }
    // 2 3 5 4

    // å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜
    [...new Set(array)]
    // å¯ä»¥ç”¨äºï¼Œå»é™¤å­—ç¬¦ä¸²é‡Œé¢çš„é‡å¤å­—ç¬¦
    [...new Set('ababbc')].join('')
    // "abc"
```
#### ä¸Šé¢ä»£ç é€šè¿‡add()æ–¹æ³•å‘ Set ç»“æ„åŠ å…¥æˆå‘˜ï¼Œç»“æœè¡¨æ˜ Set ç»“æ„ä¸ä¼šæ·»åŠ é‡å¤çš„å€¼ã€‚

Setå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–è€…å…·æœ‰ iterable æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚

``` javascript
// ä¾‹ä¸€
const set = new Set([1, 2, 3, 4, 4]);
[...set]
// [1, 2, 3, 4]

// ä¾‹äºŒ
const items = new Set([1, 2, 3, 4, 5, 5, 5, 5]);
items.size // 5

// ä¾‹ä¸‰
const set = new Set(document.querySelectorAll('div'));
set.size // 56

// ç±»ä¼¼äº
const set = new Set();
document
 .querySelectorAll('div')
 .forEach(div => set.add(div));
set.size // 56
```

## å‡½æ•°é˜²æŠ–

è¿™ä¸ª debounce å‡½æ•°åœ¨ç»™å®šçš„æ—¶é—´é—´éš”å†…åªå…è®¸ä½ æä¾›çš„å›è°ƒå‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼Œä»¥æ­¤é™ä½å®ƒçš„æ‰§è¡Œé¢‘ç‡ã€‚
å½“é‡åˆ°é«˜é¢‘è§¦å‘çš„äº‹ä»¶æ—¶ï¼Œè¿™æ ·çš„é™åˆ¶æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚
``` javascript

    function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};

    // ç”¨æ³•
    var myEfficientFn = debounce(function() {
	// é¢‘ç¹æ‰§è¡Œçš„å‡½æ•°
    console.log(1);
    }, 250);
    window.addEventListener('resize', myEfficientFn);

};
```

## ç¦æ­¢é‡å¤è°ƒç”¨ã€åªå…è®¸æ‰§è¡Œä¸€æ¬¡çš„once å‡½æ•°

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åªå¸Œæœ›æŸç§åŠ¨ä½œåªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå°±åƒæ˜¯æˆ‘ä»¬ä½¿ç”¨ onload æ¥é™å®šåªåœ¨åŠ è½½å®Œæˆæ—¶æ‰§è¡Œä¸€æ¬¡ã€‚
ä¸‹é¢è¿™ä¸ªå‡½æ•°å°±èƒ½è®©ä½ çš„æ“ä½œæ‰§è¡Œä¸€æ¬¡åå°±ä¸ä¼šå†é‡å¤æ‰§è¡Œã€‚

``` javascript
    function once(fn, context) { 
	var result;

	return function() { 
		if(fn) {
			result = fn.apply(context || this, arguments);
			fn = null;
		}
		return result;
	};
}

// ç”¨æ³•
var canOnlyFireOnce = once(function() {
	console.log('Fired!');
});

canOnlyFireOnce(); // "Fired!"
canOnlyFireOnce(); // nada
```

### console

``` javascript
// å£°æ˜
console.log(['%cè½©', '%cæ—¶é—´: 2020-12', '%cä¸»é¡µ: wuruixuan.com', '%cgithub: www.github.com/wuruixuan2464', '%cåº§å³é“­: I am just a ordinary people ğŸ˜Š'].join('\n').toString(),
    `
            background:url(http://www.wellyyss.cn/images/logo.png) no-repeat left center;
            background-size:30px 40px;
            padding-left:40px;
            line-height:50px;
            font-size: 18px;
            font-weight:bold;
            color:#00D4FF
            `,
    `
            background:none;
            line-height:30px;
            font-size: 18px;
            font-weight:bold;
            color:#00D4FF
            `,
    `
             padding-left:40px;
            background:none;
            line-height:30px;
            font-size: 18px;
            font-weight:bold;
            color:#00D4FF
            `,
    `
            background:none;
            line-height:30px;
            font-size: 18px;
            font-weight:bold;
            color:#00D4FF
            `,
    `
            padding-left:40px;
            background:none;
            line-height:30px;
            font-size: 18px;
            font-weight:bold;
            color:#00D4FF
            `
)
```